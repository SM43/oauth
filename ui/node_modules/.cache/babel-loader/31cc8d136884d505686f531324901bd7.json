{"ast":null,"code":"var _jsxFileName = \"/home/smukhade/go/src/github.com/sm43/oauth/ui/src/Auth.js\";\nimport React from \"react\";\nimport Button from '@material-ui/core/Button';\nimport GitHubLogin from \"react-github-login\";\nimport { API_URL, GH_CLIENT_ID } from \"./config.js\";\n\nconst onSuccess = response => {\n  const authorizeCode = response.code.toString();\n  fetch(`${API_URL}/oauth/redirect?code=${authorizeCode}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(function (response) {\n    if (!response.ok) {\n      alert(\"Login failed. Try again !!\");\n      throw new Error(\"Login failed - \", response);\n    }\n\n    return response.json();\n  }).then(response => {\n    localStorage.setItem(\"token\", response.token.toString());\n    var x = document.getElementById(\"logoutDiv\");\n    x.style.display = \"block\";\n    x = document.getElementById(\"loginDiv\");\n    x.style.display = \"none\";\n  }).catch(error => {\n    console.error(\"Error:\", error);\n  });\n};\n\nconst onFailure = error => {\n  alert(\"Login failed !! Try again !!\");\n  console.log(error);\n};\n\nconst logout = () => {\n  var x = document.getElementById(\"loginDiv\");\n  x.style.display = \"block\";\n  x = document.getElementById(\"logoutDiv\");\n  x.style.display = \"none\";\n  x = document.getElementById(\"det\");\n  x.style.display = \"none\";\n  localStorage.setItem(\"token\", \"\");\n};\n\nexport const Auth = () => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"loginDiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GitHubLogin, {\n    clientId: GH_CLIENT_ID,\n    redirectUri: \"\",\n    onSuccess: onSuccess,\n    onFailure: onFailure,\n    id: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  })), \"\\u2003\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"logoutDiv\",\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    id: \"logout\",\n    name: \"logout\",\n    type: \"submit\",\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Logout\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }), \"User Login Successfull..\"));\n};\n\nconst show = () => {\n  if (localStorage.getItem(\"token\") !== \"\") {\n    fetch(`${API_URL}/details`, {\n      method: \"GET\",\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      if (!response.ok) {\n        alert(\"failed to get user!!\");\n        throw new Error(\"failed to get user - \", response);\n      }\n\n      return response.json();\n    }).then(response => {\n      var x = document.getElementById(\"det\");\n      x.style.display = \"block\";\n      document.getElementById(\"name\").innerHTML = response.name.toString();\n      document.getElementById(\"gh-id\").innerHTML = response.githubID.toString();\n    }).catch(error => {\n      console.error(\"Error:\", error);\n    });\n  } else {\n    alert(\"Please login first...!!\");\n  }\n};\n\nexport const Detail = () => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    onClick: show,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, \"Show User Details\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"det\",\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"Name: \"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 30\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, \"GiHub ID: \"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"gh-id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 34\n    }\n  })));\n};","map":{"version":3,"sources":["/home/smukhade/go/src/github.com/sm43/oauth/ui/src/Auth.js"],"names":["React","Button","GitHubLogin","API_URL","GH_CLIENT_ID","onSuccess","response","authorizeCode","code","toString","fetch","method","headers","then","ok","alert","Error","json","localStorage","setItem","token","x","document","getElementById","style","display","catch","error","console","onFailure","log","logout","Auth","show","getItem","innerHTML","name","githubID","Detail"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Button from '@material-ui/core/Button';\nimport GitHubLogin from \"react-github-login\";\nimport { API_URL, GH_CLIENT_ID } from \"./config.js\";\n\nconst onSuccess = (response) => {\n  const authorizeCode = response.code.toString();\n  fetch(`${API_URL}/oauth/redirect?code=${authorizeCode}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  })\n    .then(function (response) {\n      if (!response.ok) {\n        alert(\"Login failed. Try again !!\");\n        throw new Error(\"Login failed - \", response);\n      }\n      return response.json();\n    })\n    .then((response) => {\n      localStorage.setItem(\"token\", response.token.toString());\n      var x = document.getElementById(\"logoutDiv\");\n      x.style.display = \"block\";\n      x = document.getElementById(\"loginDiv\");\n      x.style.display = \"none\";\n    })\n    .catch((error) => {\n      console.error(\"Error:\", error);\n    });\n};\nconst onFailure = (error) => {\n  alert(\"Login failed !! Try again !!\");\n  console.log(error);\n};\n\n\nconst logout = () => {\n  var x = document.getElementById(\"loginDiv\");\n  x.style.display = \"block\";\n  x = document.getElementById(\"logoutDiv\");\n  x.style.display = \"none\";\n  x = document.getElementById(\"det\");\n  x.style.display = \"none\";\n  localStorage.setItem(\"token\", \"\");\n};\n\n\nexport const Auth = () => {\n  return (\n    <div>\n      <br></br>\n      <div id=\"loginDiv\">\n        <GitHubLogin\n          clientId={GH_CLIENT_ID}\n          redirectUri=\"\"\n          onSuccess={onSuccess}\n          onFailure={onFailure}\n          id=\"login\"\n        />\n      </div>\n      &emsp;\n      <br></br>\n      <div id=\"logoutDiv\" style={{ display: \"none\" }}>\n        <button id=\"logout\" name=\"logout\" type=\"submit\" onClick={logout}>\n          Logout\n          </button>\n        <br></br>\n\n        <br></br>\n\n        <br></br>\n        User Login Successfull..\n      </div>\n    </div>\n\n  );\n};\n\n\nconst show = () => {\n  if (localStorage.getItem(\"token\") !== \"\") {\n    fetch(`${API_URL}/details`, {\n      method: \"GET\",\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then(function (response) {\n        if (!response.ok) {\n          alert(\"failed to get user!!\");\n          throw new Error(\"failed to get user - \", response);\n        }\n        return response.json();\n      })\n      .then((response) => {\n        var x = document.getElementById(\"det\");\n        x.style.display = \"block\";\n        document.getElementById(\"name\").innerHTML = response.name.toString()\n        document.getElementById(\"gh-id\").innerHTML = response.githubID.toString()\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  } else {\n    alert(\"Please login first...!!\");\n  }\n\n}\nexport const Detail = () => {\n  return (\n    <div>\n      <br></br>\n      <Button variant=\"contained\" onClick={show}>Show User Details</Button>\n      <div id=\"det\" style={{ display: \"none\" }}>\n        <label>Name: </label><p id=\"name\"></p>\n        <label>GiHub ID: </label><p id=\"gh-id\"></p>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}